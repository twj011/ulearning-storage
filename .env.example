# =============================================
# Cloudflare 绑定配置说明
# =============================================
#
# 本项目使用 Cloudflare Workers 绑定，无需 .env 文件
# 所有配置通过 wrangler.toml 和 Cloudflare Dashboard 管理
#
# =============================================

# ==================== 必需绑定 ====================

# D1 数据库（必需）
# 用途：存储文件元数据
# 绑定名称：DB（默认，不要修改）
# 配置位置：wrangler.toml
# 创建方式：npm run setup 或 wrangler d1 create storage_db
[[d1_databases]]
binding = "DB"
database_name = "storage_db"
database_id = "your-database-id"

# ==================== 可选绑定 ====================

# KV 命名空间（可选）
# 用途：会话管理、缓存
# 绑定名称：KV（默认，不要修改）
# 配置位置：wrangler.toml
# 创建方式：npm run setup 或 wrangler kv namespace create KV
[[kv_namespaces]]
binding = "KV"
id = "your-kv-id"
preview_id = "your-kv-preview-id"

# ==================== 环境变量 ====================


# 配置位置：Cloudflare Dashboard > Workers & Pages > Settings > Environment Variables


# CORS 允许的域名（可选）
# 用途：限制跨域访问
# 配置位置：Cloudflare Dashboard > Workers & Pages > Settings > Environment Variables
# 默认值：*（允许所有域名）
# ALLOWED_ORIGINS=https://yourdomain.com,https://anotherdomain.com

# 会话过期时间（可选）
# 用途：KV 会话存储的过期时间（秒）
# 默认值：86400（24小时）
# SESSION_TTL=86400

# ==================== 说明 ====================
#
# 1. 绑定配置（必需）
#    - DB: D1 数据库绑定，必须配置
#    - KV: KV 命名空间绑定，可选（用于会话管理）
#
# 2. 环境变量配置
#    在 Cloudflare Dashboard 配置：
#    Workers & Pages > 你的项目 > Settings > Environment Variables
#
#    必需环境变量：
#    - DEFAULT_COURSE_ID: 默认课程 ID（如 153836）
#
#    可选环境变量：
#    - ALLOWED_ORIGINS: CORS 允许的域名
#    - SESSION_TTL: 会话过期时间
#
# 3. 默认绑定名称
#    - DB: D1 数据库（不要修改）
#    - KV: KV 命名空间（不要修改）
#
# 4. 快速开始
#    运行 npm run setup 自动创建所有必需资源
#    然后在 Cloudflare Dashboard 添加 DEFAULT_COURSE_ID 环境变量

# =============================================
# uleaning-storage environment configuration
# Copy this file to .env and fill in your values.
# =============================================

# Login credentials (choose ONE method)
# 1) Username + password (preferred for automation)
ULEARNING_USERNAME=
ULEARNING_PASSWORD=

# 2) Authorization token (if you already have it)
# ULEARNING_TOKEN=YOUR_AUTHORIZATION_TOKEN

# Default course id used by some scripts/examples (optional)
DEFAULT_COURSE_ID=153836

# API base url (normally do not change)
API_BASE_URL=https://courseapi.ulearning.cn

# Upload timeout in seconds
UPLOAD_TIMEOUT=300
